<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mindfulness Tool</title>
<script src="ink.js"></script>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 600px; margin: auto; }
    #story { white-space: pre-wrap; }
    .choice { color: blue; cursor: pointer; margin: 0.5em 0; }
    .choice:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div id="story">Loading story...</div>
  <script>
    fetch('story.json')
      .then(response => response.json())
      .then(storyContent => {
        const story = new inkjs.Story(storyContent);
        console.log("Story loaded:", story);
        const storyContainer = document.getElementById('story');
function continueStory() {
  while(story.canContinue) {
    const paragraph = document.createElement('p');
    paragraph.textContent = story.Continue();
    storyContainer.appendChild(paragraph);
  }
}

// Kick off the story
continueStory();

        function continueStory() {
          while(story.canContinue) {
            const paragraph = document.createElement('p');
            paragraph.textContent = story.Continue();
            storyContainer.appendChild(paragraph);
          }

          story.currentChoices.forEach((choice, index) => {
            const choiceParagraph = document.createElement('p');
            choiceParagraph.className = 'choice';
            choiceParagraph.textContent = choice.text;
            choiceParagraph.addEventListener('click', () => {
              story.ChooseChoiceIndex(index);
              storyContainer.innerHTML = '';
              continueStory();
            });
            storyContainer.appendChild(choiceParagraph);
          });
        }

        continueStory();
      });
  </script>
</body>
</html>

